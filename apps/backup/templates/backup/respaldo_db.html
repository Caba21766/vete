{% extends 'base.html' %}
{% load static %}

{% block contenido %}
<div class="container mt-4">
    <h2 class="text-center mb-4">Respaldo de Base de Datos</h2>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="{% url 'backup:crear_respaldo' %}" class="btn btn-primary">
            <i class="fas fa-database"></i> Crear Respaldo
        </a>
        <p class="text-muted">Última actualización: {{ ultima_fecha }}</p>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center">
            <thead class="table-dark">
                <tr>
                    <th>#</th>
                    <th>Nombre del Archivo</th>
                    <th>Tamaño</th>
                    <th>Fecha de Creación</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for respaldo in respaldos %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ respaldo.nombre }}</td>
                        <td>{{ respaldo.tamano }}</td>
                        <td>{{ respaldo.fecha }}</td>
                        <td>
                            <a href="{% url 'backup:descargar_respaldo' respaldo.nombre %}" class="btn btn-success btn-sm">
                                <i class="fas fa-download"></i> Descargar
                            </a>
                            <a href="{% url 'backup:eliminar_respaldo' respaldo.nombre %}" class="btn btn-danger btn-sm" onclick="return confirm('¿Seguro que deseas eliminar este respaldo?');">
                                <i class="fas fa-trash-alt"></i> Eliminar
                            </a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center text-muted">No hay respaldos disponibles.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
            <hr>
            <a href="{% url 'backup:exportar_provedores' %}" class="btn btn-outline-success">
                <i class="fas fa-file-excel"></i> Exportar Proveedores a Excel
            </a>
            <a href="{% url 'backup:exportar_categorias' %}" class="btn btn-outline-primary">
                <i class="fas fa-file-excel"></i> Exportar Categorías a Excel
            </a>
            <a href="{% url 'backup:exportar_productos' %}" class="btn btn-outline-success">
                <i class="fas fa-file-excel"></i> Exportar Productos a Excel
            </a>
            <a href="{% url 'backup:exportar_compras' %}" class="btn btn-outline-success">
                <i class="fas fa-file-excel"></i> Exportar Compras a Excel
            </a>
            <a href="{% url 'backup:exportar_facturas' %}" class="btn btn-outline-success">
                <i class="fas fa-file-excel"></i> Exportar Facturas a Excel
            </a>
            <hr>
            <a href="{% url 'backup:exportar_cuenta_corriente' %}" class="btn btn-outline-primary">
                <i class="fas fa-file-excel"></i> Exp. Cuenta Corriente a Excel
            </a>
            <hr>
</div>
{% endblock %}
